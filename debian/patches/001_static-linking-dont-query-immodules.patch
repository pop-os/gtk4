diff -urN gtk+-2.10.1.orig/configure.in gtk+-2.10.1/configure.in
--- gtk+-2.10.1.orig/configure.in	2006-08-15 00:12:10.000000000 +0200
+++ gtk+-2.10.1/configure.in	2006-08-15 10:09:55.000000000 +0200
@@ -134,6 +134,7 @@
 dnl Initialize libtool
 AC_PROG_CC
 AM_DISABLE_STATIC
+AM_CONDITIONAL([ENABLE_STATIC], [test "$enable_static" = yes])
 
 if test "$os_win32" = "yes"; then
   if test x$enable_static = xyes -o x$enable_static = x; then
diff -urN gtk+-2.10.1.orig/modules/input/Makefile.am gtk+-2.10.1/modules/input/Makefile.am
--- gtk+-2.10.1.orig/modules/input/Makefile.am	2006-01-29 05:00:45.000000000 +0100
+++ gtk+-2.10.1/modules/input/Makefile.am	2006-08-15 10:09:55.000000000 +0200
@@ -89,8 +89,12 @@
 if CROSS_COMPILING
 RUN_QUERY_IMMODULES_TEST=false
 else
+if ENABLE_STATIC
+RUN_QUERY_IMMODULES_TEST=false
+else
 RUN_QUERY_IMMODULES_TEST=test -z "$(DESTDIR)"
 endif
+endif
 
 # Running this if cross compiling or if DESTDIR is set is going to
 # not work at all, so skip it.
@@ -130,7 +134,18 @@
 	$(IM_IME_MODULE)
 
 gtk.immodules: Makefile.am $(module_LTLIBRARIES)
-	$(top_builddir)/gtk/gtk-query-immodules-2.0 $(module_LTLIBRARIES) > gtk.immodules
+	@if $(RUN_QUERY_IMMODULES_TEST) ; then \
+	  echo "$(top_builddir)/gtk/gtk-query-immodules-2.0 > gtk.immodules" ; \
+	$(top_builddir)/gtk/gtk-query-immodules-2.0 $(module_LTLIBRARIES) > gtk.immodules; \
+	else \
+	  echo "***" ; \
+	  echo "*** Warning: gtk.immodules not built" ; \
+	  echo "***" ; \
+	  echo "*** Generate this file manually on host" ; \
+	  echo "*** system using gtk-query-immodules-2.0" ; \
+	  echo "***" ; \
+	  touch gtk.immodules; \
+        fi
 
 CLEANFILES = gtk.immodules
 
