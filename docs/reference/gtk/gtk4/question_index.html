<!--
SPDX-FileCopyrightText: 2021 GNOME Foundation

SPDX-License-Identifier: Apache-2.0 OR GPL-3.0-or-later
-->

<!--
SPDX-FileCopyrightText: 2021 GNOME Foundation

SPDX-License-Identifier: Apache-2.0 OR GPL-3.0-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Gtk &ndash; 4.0: Common Questions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  
  <meta property="og:image:width" content="256"/>
  <meta property="og:image:height" content="256"/>
  <meta property="og:image:secure_url" content="gtk-logo.svg"/>
  <meta property="og:image:alt" content="Gtk-4.0"/>
  

  
  <meta property="og:title" content="Gtk: Common Questions"/>
  <meta property="og:description" content="Reference for Gtk-4.0: Common Questions"/>
  <meta name="twitter:title" content="Gtk: Common Questions"/>
  <meta name="twitter:description" content="Reference for Gtk-4.0: Common Questions"/>


  
  <meta name="twitter:card" content="summary"/>

  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>
  <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      <div class="section">
        <img src="gtk-logo.svg" class="logo"/>
      </div>
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">Gtk</a></h3>
        <p>API Version: 4.0</p>
        
        <p>Library Version: 4.3.1</p>
        
      </div>
      
      
    </nav>

    
    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>
    

    
<section id="main" class="content">
  <section>
    <div class="docblock">
    <p>This is an &#8220;index&#8221; of the reference manual organized by common &#8220;How do
I&#8230;&#8221; questions. If you aren&#8217;t sure which documentation to read for
the question you have, this list is a good place to&nbsp;start.</p>
<h2 id="general-questions">General Questions<a class="md-anchor" href="#general-questions" title="Permanent link"></a></h2>
<ol>
<li>
<p>How do I get started with <span class="caps">GTK</span>?</p>
<p>The <span class="caps">GTK</span> <a href="https://www.gtk.org">website</a> offers some
<a href="https://www.gtk.org/documentation.php">tutorials</a> and other documentation
(most of it about <span class="caps">GTK</span> 2.x and 3.x, but still somewhat applicable). This
reference manual also contains a introductory
<a href="#gtk-getting-started">Getting Started</a>&nbsp;part.</p>
<p>More documentation ranging from whitepapers to online books can be found at
the <a href="https://developer.gnome.org"><span class="caps">GNOME</span> developer&#8217;s site</a>. After studying these
materials you should be well prepared to come back to this reference manual for&nbsp;details.</p>
</li>
<li>
<p>Where can I get help with <span class="caps">GTK</span>, submit a bug report, or make a feature&nbsp;request?</p>
<p>See the <a href="#gtk-resources">documentation</a> on this&nbsp;topic.</p>
</li>
<li>
<p>How do I port from one <span class="caps">GTK</span> version to&nbsp;another?</p>
<p>See the <a href="#migrating">migration guide</a>. You may also find useful information in
the documentation for specific widgets and functions. If you have a question not
covered in the manual, feel free to ask, and please
<a href="https://gitlab.gnome.org/GNOME/gtk/issues/new">file a bug report</a> against the&nbsp;documentation.</p>
</li>
<li>
<p>How does memory management work in <span class="caps">GTK</span>? Should I free data returned from&nbsp;functions?</p>
<p>See the documentation for <code>GObject</code> and <code>GInitiallyUnowned</code>. For <code>GObject</code> note
specifically <code>g_object_ref()</code> and <code>g_object_unref()</code>. <code>GInitiallyUnowned</code> is a
subclass of <code>GObject</code> so the same points apply, except that it has a &#8220;floating&#8221;
state (explained in its&nbsp;documentation).</p>
<p>For strings returned from functions, they will be declared &#8220;const&#8221; if they should
not be freed. Non-const strings should be freed with <code>g_free()</code>. Arrays follow the
same rule. If you find an undocumented exception to the rules, please
<a href="https://gitlab.gnome.org/GNOME/gtk/issues/new">file a bug report.</a>.</p>
<p>The transfer annotations for gobject-introspection that are part of the
documentation can provide useful hints for memory handling semantics as&nbsp;well.</p>
</li>
<li>
<p>Why does my program leak memory, if I destroy a widget immediately
    after creating&nbsp;it?</p>
<p>If <code>GtkFoo</code> isn&#8217;t a toplevel window,&nbsp;then</p>
<div class="codehilite"><pre><span></span><code>foo = gtk_foo_new ();
g_object_unref (foo);
</code></pre></div>

<p>is a memory leak, because no one assumed the initial floating reference
(you will get a warning about this too). If you are using a widget and
you aren&#8217;t immediately packing it into a container, then you probably
want standard reference counting, not floating reference&nbsp;counting.</p>
<p>To get this, you must acquire a reference to the widget and drop the
floating reference (<em>ref and sink</em> in <code>GObject</code> parlance) after creating&nbsp;it:</p>
<div class="codehilite"><pre><span></span><code>foo = gtk_foo_new ();
g_object_ref_sink (foo);
</code></pre></div>

<p>When you immediately add a widget to a container, it takes care of assuming
the initial floating reference and you don&#8217;t have to worry about reference
counting at all &#8230; just remove the widget from the container to get rid of&nbsp;it.</p>
</li>
<li>
<p>How do I use <span class="caps">GTK</span> with&nbsp;threads?</p>
<p><span class="caps">GTK</span> requires that all <span class="caps">GTK</span> <span class="caps">API</span> calls are made from the same thread in which
the <code>GtkApplication</code> was created, or <code>gtk_init()</code> was called (the <em>main thread</em>).</p>
<p>If you want to take advantage of multi-threading in a <span class="caps">GTK</span> application,
it is usually best to send long-running tasks to worker threads, and feed
the results back to the main thread using <code>g_idle_add()</code> or <code>GAsyncQueue</code>. <span class="caps">GIO</span>
offers useful tools for such an approach such as <code>GTask</code>.</p>
</li>
<li>
<p>How do I internationalize a <span class="caps">GTK</span>&nbsp;program?</p>
<p>Most people use <a href="https://www.gnu.org/software/gettext/"><span class="caps">GNU</span> gettext</a>,
already required in order to install GLib. On a <span class="caps">UNIX</span> or Linux system with
gettext installed, type <code>info gettext</code> to read the&nbsp;documentation.</p>
<p>The short checklist on how to use gettext is: call bindtextdomain() so
gettext can find the files containing your translations, call textdomain()
to set the default translation domain, call bind_textdomain_codeset() to
request that all translated strings are returned in <span class="caps">UTF</span>-8, then call
gettext() to look up each string to be translated in the default&nbsp;domain.</p>
<p><code>gi18n.h</code> provides the following shorthand macros for convenience.
Conventionally, people define macros as follows for&nbsp;convenience:</p>
<div class="codehilite"><pre><span></span><code>#define  _(x)     gettext (x)
#define N_(x)     x
#define C_(ctx,x) pgettext (ctx, x)
</code></pre></div>

<p>You use <code>N_()</code> (N stands for no-op) to mark a string for translation in
a location where a function call to gettext() is not allowed, such as
in an array initializer. You eventually have to call gettext() on the
string to actually fetch the translation. <code>_()</code> both marks the string for
translation and actually translates it. The <code>C_()</code> macro (C stands for
context) adds an additional context to the string that is marked for
translation, which can help to disambiguate short strings that might
need different translations in different parts of your&nbsp;program.</p>
<p>Code using these macros ends up looking like&nbsp;this:</p>
<div class="codehilite"><pre><span></span><code>#include &lt;gi18n.h&gt;

static const char *global_variable = N_(&quot;Translate this string&quot;);

static void
make_widgets (void)
{
  GtkWidget *label1;
  GtkWidget *label2;

  label1 = gtk_label_new (_(&quot;Another string to translate&quot;));
  label2 = gtk_label_new (_(global_variable));
...
</code></pre></div>

<p>Libraries using gettext should use dgettext() instead of gettext(),
which allows them to specify the translation domain each time they
ask for a translation. Libraries should also avoid calling textdomain(),
since they will be specifying the domain instead of using the&nbsp;default.</p>
<p>With the convention that the macro <code>GETTEXT_PACKAGE</code> is defined to hold
your libraries translation domain, <code>gi18n-lib.h</code> can be included to provide
the following&nbsp;convenience:</p>
<div class="codehilite"><pre><span></span><code>#define _(x) dgettext (GETTEXT_PACKAGE, x)
</code></pre></div>

</li>
<li>
<p>How do I use non-<span class="caps">ASCII</span> characters in <span class="caps">GTK</span> programs&nbsp;?</p>
<p><span class="caps">GTK</span> uses <a href="http://www.unicode.org">Unicode</a> (more exactly <span class="caps">UTF</span>-8) for all text.
<span class="caps">UTF</span>-8 encodes each Unicode codepoint as a sequence of one to six bytes and
has a number of nice properties which make it a good choice for working with
Unicode text in C&nbsp;programs:</p>
<ul>
<li><span class="caps">ASCII</span> characters are encoded by their familiar <span class="caps">ASCII</span>&nbsp;codepoints.</li>
<li><span class="caps">ASCII</span> characters never appear as part of any other&nbsp;character.</li>
<li>The zero byte doesn&#8217;t occur as part of a character, so that <span class="caps">UTF</span>-8
  string can be manipulated with the usual C library functions for
  handling zero-terminated&nbsp;strings.</li>
</ul>
<p>More information about Unicode and <span class="caps">UTF</span>-8 can be found in the
<a href="https://www.cl.cam.ac.uk/~mgk25/unicode.html"><span class="caps">UTF</span>-8 and Unicode <span class="caps">FAQ</span></a>.
GLib provides functions for converting strings between <span class="caps">UTF</span>-8 and other
encodings, see g_locale_to_utf8() and&nbsp;g_convert().</p>
<p>Text coming from external sources (e.g. files or user input), has to be
converted to <span class="caps">UTF</span>-8 before being handed over to <span class="caps">GTK</span>. The following example
writes the content of a <span class="caps">IS0</span>-8859-1 encoded text file to <code>stdout</code>:</p>
<div class="codehilite"><pre><span></span><code>char *text, *utf8_text;
gsize length;
GError *error = NULL;

if (g_file_get_contents (filename, &amp;amp;text, &amp;amp;length, NULL))
  {
    utf8_text = g_convert (text, length, &quot;UTF-8&quot;, &quot;ISO-8859-1&quot;,
                           NULL, NULL, &amp;error);
    if (error != NULL)
      {
        fprintf (&quot;Couldn&#39;t convert file %s to UTF-8\n&quot;, filename);
        g_error_free (error);
      }
    else
      g_print (utf8_text);
  }
else
  fprintf (stderr, &quot;Unable to read file %s\n&quot;, filename);
</code></pre></div>

<p>For string literals in the source code, there are several alternatives
for handling non-<span class="caps">ASCII</span>&nbsp;content:</p>
<ul>
<li>Direct <span class="caps">UTF</span>-8</li>
</ul>
<p>If your editor and compiler are capable of handling <span class="caps">UTF</span>-8 encoded
  sources, it is very convenient to simply use <span class="caps">UTF</span>-8 for string literals,
  since it allows you to edit the strings in &#8220;wysiwyg&#8221;. Note that choosing
  this option may reduce the portability of your&nbsp;code.</p>
<ul>
<li>Escaped <span class="caps">UTF</span>-8</li>
</ul>
<p>Even if your toolchain can&#8217;t handle <span class="caps">UTF</span>-8 directly, you can still
  encode string literals in <span class="caps">UTF</span>-8 by using octal or hexadecimal escapes
  like <code>\212</code> or <code>\xa8</code> to encode each byte. This is portable, but
  modifying the escaped strings is not very convenient. Be careful when
  mixing hexadecimal escapes with ordinary text; <code>"\xa8abcd"</code>  is a string
  of length 1&nbsp;!</p>
<ul>
<li>Runtime&nbsp;conversion</li>
</ul>
<p>If the string literals can be represented in an encoding which your
  toolchain can handle (e.g. <span class="caps">IS0</span>-8859-1), you can write your source
  files in that encoding and use g_convert() to convert the strings
  to <span class="caps">UTF</span>-8 at runtime. Note that this has some runtime overhead, so
  you may want to move the conversion out of inner&nbsp;loops.</p>
<p>Here is an example showing the three approaches using the copyright
sign © which has Unicode and <span class="caps">ISO</span>-8859-1 codepoint 169 and is represented
in <span class="caps">UTF</span>-8 by the two bytes 194, 169, or <code>"\302\251"</code> as a string&nbsp;literal:</p>
<div class="codehilite"><pre><span></span><code>g_print (&quot;direct UTF-8: ©&quot;);
g_print (&quot;escaped UTF-8: \302\251&quot;);
text = g_convert (&quot;runtime conversion: ©&quot;, -1,
                  &quot;ISO-8859-1&quot;, &quot;UTF-8&quot;, NULL, NULL, NULL);
g_print (text);
g_free (text);
</code></pre></div>

<p>If you are using gettext() to localize your application, you need
to call bind_textdomain_codeset() to ensure that translated strings
are returned in <span class="caps">UTF</span>-8&nbsp;encoding.</p>
</li>
<li>
<p>How do I use <span class="caps">GTK</span> with&nbsp;C++?</p>
<p>There are two ways to approach this. The <span class="caps">GTK</span> header files use the subset
of C that&#8217;s also valid C++, so you can simply use the normal <span class="caps">GTK</span> <span class="caps">API</span>
in a C++ program. Alternatively, you can use a &#8220;C++ binding&#8221; such as
<a href="https://www.gtkmm.org/">gtkmm</a> which provides a native C++ <span class="caps">API</span>.</p>
<p>When using <span class="caps">GTK</span> directly, keep in mind that only functions can be
connected to signals, not methods. So you will need to use global
functions or &#8220;static&#8221; class functions for signal&nbsp;connections.</p>
<p>Another common issue when using <span class="caps">GTK</span> directly is that C++ will not
implicitly convert an integer to an enumeration. This comes up when
using bitfields; in C you can write the following&nbsp;code:</p>
<div class="codehilite"><pre><span></span><code>gdk_surface_set_events (gdk_surface,
                        GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK);
</code></pre></div>

<p>while in C++ you must&nbsp;write:</p>
<div class="codehilite"><pre><span></span><code>gdk_surface_set_events (gdk_surface,
                        (GdkEventMask) GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK);
</code></pre></div>

<p>There are very few functions that require this cast,&nbsp;however.</p>
</li>
<li>
<p>How do I use <span class="caps">GTK</span> with other non-C&nbsp;languages?</p>
<p>See the list of <a href="https://www.gtk.org/language-bindings.php">language bindings</a>
on the <span class="caps">GTK</span> <a href="https://www.gtk.org">website</a>.</p>
</li>
<li>
<p>How do I load an image or animation from a&nbsp;file?</p>
<p>To load an image file straight into a display widget, use
<a href="ctor.Image.new_from_file.html">gtk_image_new_from_file()</a>. To load an image for another purpose, use
<a href="javascript:void(0)" data-namespace="Gdk" data-link="ctor.Texture.new_from_file.html" class="external">gdk_texture_new_from_file()</a>. To load a video from a file, use
<a href="ctor.MediaFile.new_for_file.html">gtk_media_file_new_for_file()</a>.</p>
</li>
<li>
<p>How do I draw&nbsp;text?</p>
<p>To draw a piece of text onto a cairo surface, use a Pango layout and
<a href="javascript:void(0)" data-namespace="PangoCairo" data-link="func.show_layout.html" class="external">pango_cairo_show_layout()</a>.</p>
<div class="codehilite"><pre><span></span><code>layout = gtk_widget_create_pango_layout (widget, text);
fontdesc = pango_font_description_from_string (&quot;Luxi Mono 12&quot;);
pango_layout_set_font_description (layout, fontdesc);
pango_cairo_show_layout (cr, layout);
pango_font_description_free (fontdesc);
g_object_unref (layout);
</code></pre></div>

<p>See also the <a href="https://developer.gnome.org/pango/stable/pango-Cairo-Rendering.html">Cairo Rendering</a>
section of the <a href="https://developer.gnome.org/pango/stable/">Pango documentation</a>.</p>
<p>To draw a piece of text in a widget <a href="vfunc.Widget.snapshot.html"><code>Gtk.WidgetClass.snapshot</code></a> implementation,
use <a href="method.Snapshot.append_layout.html">gtk_snapshot_append_layout()</a>.</p>
</li>
<li>
<p>How do I measure the size of a piece of&nbsp;text?</p>
<p>To obtain the size of a piece of text, use a Pango layout and
<a href="javascript:void(0)" data-namespace="Pango" data-link="method.Layout.get_pixel_size.html" class="external">pango_layout_get_pixel_size()</a>, using code like the&nbsp;following:</p>
<div class="codehilite"><pre><span></span><code>layout = gtk_widget_create_pango_layout (widget, text);
fontdesc = pango_font_description_from_string (&quot;Luxi Mono 12&quot;);
pango_layout_set_font_description (layout, fontdesc);
pango_layout_get_pixel_size (layout, &amp;amp;width, &amp;amp;height);
pango_font_description_free (fontdesc);
g_object_unref (layout);
</code></pre></div>

<p>See also the <a href="https://developer.gnome.org/pango/stable/pango-Layout-Objects.html">Layout Objects</a>
section of the <a href="https://developer.gnome.org/pango/stable/">Pango documentation</a>.</p>
</li>
<li>
<p>Why are types not registered if I use their <code>GTK_TYPE_BLAH</code> macro?</p>
<p>The <code>GTK_TYPE_BLAH</code> macros are defined as calls to gtk_blah_get_type(), and
the <code>_get_type()</code> functions are declared as <code>G_GNUC_CONST</code> which allows the
compiler to optimize the call away if it appears that the value is not
being&nbsp;used.</p>
<p>GLib provides the <code>g_type_ensure()</code> function to work around this&nbsp;problem.</p>
<div class="codehilite"><pre><span></span><code>g_type_ensure (GTK_TYPE_BLAH);
</code></pre></div>

</li>
<li>
<p>How do I create a transparent toplevel&nbsp;window?</p>
<p>Any toplevel window can be transparent. It is just a matter of setting a
transparent background in the <span class="caps">CSS</span> style for&nbsp;it.</p>
</li>
</ol>
<h2 id="which-widget-should-i-use">Which widget should I use...<a class="md-anchor" href="#which-widget-should-i-use" title="Permanent link"></a></h2>
<ol>
<li>
<p>&#8230;for lists and&nbsp;trees?</p>
<p>This question has different answers, depending on the size of the dataset
and the required formatting&nbsp;flexibility.</p>
<p>If you want to display a large amount of data in a uniform way, your best
option is a <a href="class.TreeView.html"><code>GtkTreeView</code></a> widget. See the <a href="TreeWidget">tree widget overview</a>.
A list is just a tree with no branches, so the treeview widget is used for
lists as&nbsp;well.</p>
<p>If you want to display a small amount of items, but need flexible formatting
and widgetry inside the list, then you probably want to use a <a href="class.ListBox.html"><code>GtkListBox</code></a>,
which uses regular widgets for&nbsp;display.</p>
</li>
<li>
<p>&#8230;for multi-line text display or&nbsp;editing?</p>
<p>See the <a href="TextWidget">text widget overview</a> &#8212; you should use the
<a href="class.TextView.html"><code>GtkTextView</code></a>&nbsp;widget.</p>
<p>If you only have a small amount of text, <a href="class.Label.html"><code>GtkLabel</code></a> may also be appropriate
of course. It can be made selectable with <a href="method.Label.set_selectable.html">gtk_label_set_selectable()</a>. For a
single-line text entry, see <a href="class.Entry.html"><code>GtkEntry</code></a>.</p>
</li>
<li>
<p>&#8230;to display an image or&nbsp;animation?</p>
<p><span class="caps">GTK</span> has two widgets that are dedicated to displaying images. <a href="class.Image.html"><code>GtkImage</code></a>, for
small, fixed-size icons and <a href="class.Picture.html"><code>GtkPicture</code></a> for content&nbsp;images.</p>
<p>Both can display images in just about any format <span class="caps">GTK</span> understands.
You can also use <a href="class.DrawingArea.html"><code>GtkDrawingArea</code></a> if you need to do something more complex,
such as draw text or graphics over the top of the&nbsp;image.</p>
<p>Both <a href="class.Image.html"><code>GtkImage</code></a> and <a href="class.Picture.html"><code>GtkPicture</code></a> can display animations and videos as well.
To show an webm file, load it with the <a href="class.MediaFile.html"><code>GtkMediaFile</code></a> <span class="caps">API</span> and then use
it as a&nbsp;paintable:</p>
<div class="codehilite"><pre><span></span><code>mediafile = gtk_media_file_new_for_filename (&quot;example.webm&quot;);
picture = gtk_picture_new_for_paintable (GDK_PAINTABLE (mediafile));
</code></pre></div>

</li>
<li>
<p>&#8230;for presenting a set of mutually-exclusive choices, where Windows
    would use a combo&nbsp;box?</p>
<p>With <span class="caps">GTK</span>, a <a href="class.ComboBox.html"><code>GtkComboBox</code></a> is the recommended widget to use for this use case.
If you need an editable text entry, use the <a href="property.ComboBox.has-entry.html"><code>GtkComboBox:has-entry</code></a>&nbsp;property.</p>
<p>A newer alternative is <a href="class.DropDown.html"><code>GtkDropDown</code></a>.</p>
</li>
</ol>
<h2 id="questions-about-gtkwidget">Questions about GtkWidget<a class="md-anchor" href="#questions-about-gtkwidget" title="Permanent link"></a></h2>
<ol>
<li>
<p>How do I change the color of a&nbsp;widget?</p>
<p>The background color of a widget is determined by the <span class="caps">CSS</span> style that applies
to it. To change that, you can set style classes on the widget, and provide
custom <span class="caps">CSS</span> to change the appearance. Such <span class="caps">CSS</span> can be loaded with
<a href="method.CssProvider.load_from_file.html">gtk_css_provider_load_from_file()</a> and its variants.
See <a href="method.StyleContext.add_provider.html">gtk_style_context_add_provider()</a>.</p>
</li>
<li>
<p>How do I change the font of a&nbsp;widget?</p>
<p>If you want to make the text of a label larger, you can use&nbsp;gtk_label_set_markup():</p>
<div class="codehilite"><pre><span></span><code>gtk_label_set_markup (label, &quot;&lt;big&gt;big tex&lt;/big&gt;&quot;);
</code></pre></div>

<p>This is preferred for many apps because it&#8217;s a relative size to the
user&#8217;s chosen font size. See <code>g_markup_escape_text()</code> if you are
constructing such strings on the&nbsp;fly.</p>
<p>You can also change the font of a widget by&nbsp;putting</p>
<div class="codehilite"><pre><span></span><code>.my-widget-class {
  font: Sans 30;
}
</code></pre></div>

<p>in a <span class="caps">CSS</span> file, loading it with <a href="method.CssProvider.load_from_file.html">gtk_css_provider_load_from_file()</a>, and
adding the provider with <a href="type_func.StyleContext.add_provider_for_display.html">gtk_style_context_add_provider_for_display()</a>.
To associate this style information with your widget, set a style class
on the widget using <a href="method.Widget.add_css_class.html">gtk_widget_add_css_class()</a>. The advantage
of this approach is that users can then override the font you have chosen.
See the <code>GtkStyleContext</code> documentation for more&nbsp;discussion.</p>
</li>
<li>
<p>How do I disable/ghost/desensitize a&nbsp;widget?</p>
<p>In <span class="caps">GTK</span> a disabled widget is termed <em>insensitive</em>.
See <a href="method.Widget.set_sensitive.html">gtk_widget_set_sensitive()</a>.</p>
</li>
</ol>
<h2 id="gtktextview-questions">GtkTextView questions<a class="md-anchor" href="#gtktextview-questions" title="Permanent link"></a></h2>
<ol>
<li>
<p>How do I get the contents of the entire text widget as a&nbsp;string?</p>
<p>See <a href="method.TextBuffer.get_bounds.html">gtk_text_buffer_get_bounds()</a> and <a href="method.TextBuffer.get_text.html">gtk_text_buffer_get_text()</a>
or <a href="method.TextIter.get_text.html">gtk_text_iter_get_text()</a>.</p>
<div class="codehilite"><pre><span></span><code>GtkTextIter start, end;
GtkTextBuffer *buffer;
char *text;

buffer = gtk_text_view_get_buffer (GTK_TEXT_VIEW (text_view));
gtk_text_buffer_get_bounds (buffer, &amp;start, &amp;end);
text = gtk_text_iter_get_text (&amp;start, &amp;end);
/* use text */
g_free (text);
</code></pre></div>

</li>
<li>
<p>How do I make a text widget display its complete contents in a specific&nbsp;font?</p>
<p>If you use <a href="method.TextBuffer.insert_with_tags.html">gtk_text_buffer_insert_with_tags()</a> with appropriate tags to
select the font, the inserted text will have the desired appearance, but
text typed in by the user before or after the tagged block will appear in
the default&nbsp;style.</p>
</li>
<li>
<p>How do I make a text view scroll to the end of the buffer automatically&nbsp;?</p>
<p>A good way to keep a text buffer scrolled to the end is to place a
<a href="GtkTextMark">mark</a> at the end of the buffer, and give it right gravity.
The gravity has the effect that text inserted at the mark gets inserted
<em>before</em>, keeping the mark at the&nbsp;end.</p>
<p>To ensure that the end of the buffer remains visible, use
<a href="method.TextView.scroll_to_mark.html">gtk_text_view_scroll_to_mark()</a> to scroll to the mark after
inserting new&nbsp;text.</p>
<p>The gtk4-demo application contains an example of this&nbsp;technique.</p>
</li>
</ol>
<h2 id="gtktreeview-questions">GtkTreeView questions<a class="md-anchor" href="#gtktreeview-questions" title="Permanent link"></a></h2>
<ol>
<li>
<p>How do I associate some data with a row in the&nbsp;tree?</p>
<p>Remember that the <a href="class.TreeModel.html"><code>GtkTreeModel</code></a> columns don&#8217;t necessarily have to be
displayed. So you can put non-user-visible data in your model just
like any other data, and retrieve it with <a href="method.TreeModel.get.html">gtk_tree_model_get()</a>.
See the <a href="TreeWidget">tree widget overview</a>.        </p>
</li>
<li>
<p>How do I put an image and some text in the same&nbsp;column?</p>
<p>You can pack more than one <a href="class.CellRenderer.html"><code>GtkCellRenderer</code></a> into a single <a href="class.TreeViewColumn.html"><code>GtkTreeViewColumn</code></a>
using <a href="method.TreeViewColumn.pack_start.html">gtk_tree_view_column_pack_start()</a> or <a href="method.TreeViewColumn.pack_end.html">gtk_tree_view_column_pack_end()</a>.
So pack both a <a href="class.CellRendererPixbuf.html"><code>GtkCellRendererPixbuf</code></a> and a <a href="class.CellRendererText.html"><code>GtkCellRendererText</code></a> into the&nbsp;column.</p>
</li>
<li>
<p>I can set data easily on my <a href="class.TreeStore.html"><code>GtkTreeStore</code></a> or <a href="class.ListStore.html"><code>GtkListStore</code></a> models using
    <a href="method.ListStore.set.html">gtk_list_store_set()</a> and <a href="method.TreeStore.set.html">gtk_tree_store_set()</a>, but can&#8217;t read it&nbsp;back?</p>
<p>Both the <a href="class.TreeStore.html"><code>GtkTreeStore</code></a> and the <a href="class.ListStore.html"><code>GtkListStore</code></a> implement the <a href="class.TreeModel.html"><code>GtkTreeModel</code></a>
interface. As a consequence, you can use any function this interface
implements. The easiest way to read a set of data back is to use
<a href="method.TreeModel.get.html">gtk_tree_model_get()</a>.</p>
</li>
<li>
<p>How do I change the way that numbers are formatted by <code>GtkTreeView</code>?</p>
<p>Use <a href="method.TreeView.insert_column_with_data_func.html">gtk_tree_view_insert_column_with_data_func()</a> or
<a href="method.TreeViewColumn.set_cell_data_func.html">gtk_tree_view_column_set_cell_data_func()</a> and do the conversion
from number to string yourself (with, say, <code>g_strdup_printf()</code>).</p>
<p>The following example demonstrates&nbsp;this:</p>
<div class="codehilite"><pre><span></span><code>enum
{
  DOUBLE_COLUMN,
  N_COLUMNS
};

GtkListStore *mycolumns;

GtkTreeView *treeview;

void
my_cell_double_to_text (GtkTreeViewColumn *tree_column,
                        GtkCellRenderer   *cell,
                        GtkTreeModel      *tree_model,
                        GtkTreeIter       *iter,
                        gpointer           data)
{
  GtkCellRendererText *cell_text = (GtkCellRendererText *)cell;
  double d;
  char *text;

  /* Get the double value from the model. */
  gtk_tree_model_get (tree_model, iter, (int)data, &amp;d, -1);
  /* Now we can format the value ourselves. */
  text = g_strdup_printf (&quot;%.2f&quot;, d);
  g_object_set (cell, &quot;text&quot;, text, NULL);
  g_free (text);
}

void
set_up_new_columns (GtkTreeView *myview)
{
  GtkCellRendererText *renderer;
  GtkTreeViewColumn *column;
  GtkListStore *mycolumns;

  /* Create the data model and associate it with the given TreeView */
  mycolumns = gtk_list_store_new (N_COLUMNS, G_TYPE_DOUBLE);
  gtk_tree_view_set_model (myview, GTK_TREE_MODEL (mycolumns));

  /* Create a GtkCellRendererText */
  renderer = gtk_cell_renderer_text_new ();

  /* Create a new column that has a title (&quot;Example column&quot;),
   * uses the above created renderer that will render the double
   * value into text from the associated model&#39;s rows.
   */
  column = gtk_tree_view_column_new ();
  gtk_tree_view_column_set_title  (column, &quot;Example column&quot;);
  renderer = gtk_cell_renderer_text_new ();
  gtk_tree_view_column_pack_start (column, renderer, TRUE);

  /* Append the new column after the GtkTreeView&#39;s previous columns. */
  gtk_tree_view_append_column (GTK_TREE_VIEW (myview), column);
  /* Since we created the column by hand, we can set it up for our
   * needs, e.g. set its minimum and maximum width, etc.
   */
  /* Set up a custom function that will be called when the column content
   * is rendered. We use the func_data pointer as an index into our
   * model. This is convenient when using multi column lists.
   */
  gtk_tree_view_column_set_cell_data_func (column, renderer,
                                           my_cell_double_to_text,
                                           (gpointer)DOUBLE_COLUMN, NULL);
}
</code></pre></div>

</li>
<li>
<p>How do I hide the expander arrows in my tree&nbsp;view?</p>
<p>Set the expander-column property of the tree view to a hidden column.
See <a href="method.TreeView.set_expander_column.html">gtk_tree_view_set_expander_column()</a> and <a href="method.TreeViewColumn.set_visible.html">gtk_tree_view_column_set_visible()</a>.</p>
</li>
</ol>
<h2 id="using-cairo-with-gtk">Using cairo with GTK<a class="md-anchor" href="#using-cairo-with-gtk" title="Permanent link"></a></h2>
<ol>
<li>
<p>How do I use cairo to draw in <span class="caps">GTK</span>&nbsp;applications?</p>
<p>Use <a href="method.Snapshot.append_cairo.html">gtk_snapshot_append_cairo()</a> in your <a href="vfunc.Widget.snapshot.html"><code>Gtk.WidgetClass.snapshot</code></a> vfunc
to obtain a cairo context and draw with&nbsp;that.</p>
</li>
<li>
<p>Can I improve the performance of my application by using another backend
    of cairo (such as <span class="caps">GL</span>)?</p>
<p>No. Most drawing in <span class="caps">GTK</span> is not done via cairo anymore (but instead
by the <span class="caps">GL</span> or Vulkan renderers of <span class="caps">GSK</span>).</p>
<p>If you use cairo for drawing your own widgets, <a href="method.Snapshot.append_cairo.html">gtk_snapshot_append_cairo()</a>
will choose the most appropriate surface type for&nbsp;you.</p>
<p>If you are interested in using <span class="caps">GL</span> for your own drawing, see <a href="class.GLArea.html"><code>GtkGLArea</code></a>.</p>
</li>
<li>
<p>Can I use cairo to draw on a <code>GdkPixbuf</code>?</p>
<p>No. The cairo image surface does not support the pixel format used by <code>GdkPixbuf</code>.</p>
<p>If you need to get cairo drawing into a format that can be displayed efficiently
by <span class="caps">GTK</span>, you may want to use an image surface and <a href="javascript:void(0)" data-namespace="Gdk" data-link="ctor.MemoryTexture.new.html" class="external">gdk_memory_texture_new()</a>.</p>
</li>
</ol>
    </div>
  </section>
</section>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>