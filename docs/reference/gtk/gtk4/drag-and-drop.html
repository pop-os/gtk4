<!--
SPDX-FileCopyrightText: 2021 GNOME Foundation

SPDX-License-Identifier: Apache-2.0 OR GPL-3.0-or-later
-->

<!--
SPDX-FileCopyrightText: 2021 GNOME Foundation

SPDX-License-Identifier: Apache-2.0 OR GPL-3.0-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Gtk &ndash; 4.0: Drag-and-Drop in GTK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  
  <meta property="og:image:width" content="256"/>
  <meta property="og:image:height" content="256"/>
  <meta property="og:image:secure_url" content="gtk-logo.svg"/>
  <meta property="og:image:alt" content="Gtk-4.0"/>
  

  
  <meta property="og:title" content="Gtk: Drag-and-Drop in GTK"/>
  <meta property="og:description" content="Reference for Gtk-4.0: Drag-and-Drop in GTK"/>
  <meta name="twitter:title" content="Gtk: Drag-and-Drop in GTK"/>
  <meta name="twitter:description" content="Reference for Gtk-4.0: Drag-and-Drop in GTK"/>


  
  <meta name="twitter:card" content="summary"/>

  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>
  <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      <div class="section">
        <img src="gtk-logo.svg" class="logo"/>
      </div>
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">Gtk</a></h3>
        <p>API Version: 4.0</p>
        
        <p>Library Version: 4.3.2</p>
        
      </div>
      
      
    </nav>

    
    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>
    

    
<section id="main" class="content">
  <section>
    <div class="docblock">
    <p>Drag-and-Drop (<span class="caps">DND</span>) is a user interaction pattern where users drag a <span class="caps">UI</span> element
from one place to another, either inside a single application or between
different application&nbsp;windows.</p>
<p>When the element is &#8216;dropped&#8217;, data is transferred from the source to the
destination, according to the drag action that is negotiated between both
sides. Most commonly, that is a <em>copy</em>, but it can also be a <em>move</em> or a
<em>link</em>, depending on the kind of data and how the drag operation has been
set&nbsp;up.</p>
<p>This chapter gives an overview over how Drag-and-Drop is handled with event
controllers in <span class="caps">GTK</span>.</p>
<h2 id="drag-sources">Drag sources<a class="md-anchor" href="#drag-sources" title="Permanent link"></a></h2>
<p>To make data available via <span class="caps">DND</span>, you create a <a href="class.DragSource.html"><code>GtkDragSource</code></a>. Drag sources
are event controllers, which initiate a Drag-and-Drop operation when the user clicks
and drags the&nbsp;widget.</p>
<p>A drag source can be set up ahead of time, with the desired drag action(s) and the data
to be transferred. But it is also possible to provide the data when a drag operation
is about to begin, by connecting to the <a href="signal.DragSource.prepare.html"><code>GtkDragSource::prepare</code></a>&nbsp;signal.</p>
<p>The GtkDragSource emits the <a href="signal.DragSource.drag-begin.html"><code>GtkDragSource::drag-begin</code></a> signal when the <span class="caps">DND</span>
operation starts, and the <a href="signal.DragSource.drag-end.html"><code>GtkDragSource::drag-end</code></a> signal when it is done.
But it is not normally necessary to handle these signals. One case in which a ::drag-end
handler is necessary is to implement <code>GDK_ACTION_MOVE</code>.</p>
<h2 id="drop-targets">Drop targets<a class="md-anchor" href="#drop-targets" title="Permanent link"></a></h2>
<p>To receive data via <span class="caps">DND</span>, you create a <a href="class.DropTarget.html"><code>GtkDropTarget</code></a>, and tell it what kind of
data to accept. You need to connect to the <a href="signal.DropTarget.drop.html"><code>GtkDropTarget::drop</code></a> signal to receive
the data when a <span class="caps">DND</span> operation&nbsp;occurs.</p>
<p>While a <span class="caps">DND</span> operation is ongoing, <span class="caps">GTK</span> provides updates when the pointer moves over
the widget to which the drop target is associated. The <a href="signal.DropTarget.enter.html"><code>GtkDropTarget::enter</code></a>,
<a href="signal.DropTarget.leave.html"><code>GtkDropTarget::leave</code></a> and <a href="signal.DropTarget.motion.html"><code>GtkDropTarget::motion</code></a> signals get emitted
for this&nbsp;purpose.</p>
<p>GtkDropTarget provides a simple <span class="caps">API</span>, and only provides the data when it has been completely
transferred. If you need to handle the data transfer yourself (for example to provide progress
information during the transfer), you can use the more complicated <a href="class.DropTargetAsync.html"><code>GtkDropTargetAsync</code></a>.</p>
<h2 id="other-considerations">Other considerations<a class="md-anchor" href="#other-considerations" title="Permanent link"></a></h2>
<p>It is sometimes necessary to update the <span class="caps">UI</span> of the destination while a <span class="caps">DND</span> operation is ongoing,
say to scroll or expand a view, or to switch pages. Typically, such <span class="caps">UI</span> changes are triggered
by hovering over the widget in&nbsp;question.</p>
<p><a href="class.DropControllerMotion.html"><code>GtkDropControllerMotion</code></a> is an event controller that can help with implementing such
behaviors. It is very similar to <a href="class.EventControllerMotion.html"><code>GtkEventControllerMotion</code></a>, but provides events during
a <span class="caps">DND</span>&nbsp;operation.</p>
    </div>
  </section>
</section>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>