<!--
SPDX-FileCopyrightText: 2021 GNOME Foundation

SPDX-License-Identifier: Apache-2.0 OR GPL-3.0-or-later
-->

<!--
SPDX-FileCopyrightText: 2021 GNOME Foundation

SPDX-License-Identifier: Apache-2.0 OR GPL-3.0-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Gtk &ndash; 4.0: Running and debugging GTK Applications</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  
  <meta property="og:image:width" content="256"/>
  <meta property="og:image:height" content="256"/>
  <meta property="og:image:secure_url" content="gtk-logo.svg"/>
  <meta property="og:image:alt" content="Gtk-4.0"/>
  

  
  <meta property="og:title" content="Gtk: Running and debugging GTK Applications"/>
  <meta property="og:description" content="Reference for Gtk-4.0: Running and debugging GTK Applications"/>
  <meta name="twitter:title" content="Gtk: Running and debugging GTK Applications"/>
  <meta name="twitter:description" content="Reference for Gtk-4.0: Running and debugging GTK Applications"/>


  
  <meta name="twitter:card" content="summary"/>

  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>
  <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      <div class="section">
        <img src="gtk-logo.svg" class="logo"/>
      </div>
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">Gtk</a></h3>
        <p>API Version: 4.0</p>
        
        <p>Library Version: 4.3.1</p>
        
      </div>
      
      
    </nav>

    
    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>
    

    
<section id="main" class="content">
  <section>
    <div class="docblock">
    <h2 id="environment-variables">Environment variables<a class="md-anchor" href="#environment-variables" title="Permanent link"></a></h2>
<p><span class="caps">GTK</span> inspects a number of environment variables in addition to
standard variables like <code>LANG</code>, <code>PATH</code>, <code>HOME</code> or <code>DISPLAY</code>; mostly
to determine paths to look for certain files. The <a href="#x11-envar">X11</a>,
<a href="#wayland-envar">Wayland</a>, <a href="#win32-envar">Windows</a> and
<a href="#broadway-envar">Broadway</a> <span class="caps">GDK</span> backends use some additional
environment&nbsp;variables.</p>
<h3 id="gtk_debug"><code>GTK_DEBUG</code><a class="md-anchor" href="#gtk_debug" title="Permanent link"></a></h3>
<p>This variable can be set to a list of debug options, which cause <span class="caps">GTK</span> to
print out different types of debugging information. Some of these options
are only available when <span class="caps">GTK</span> has been configured with <code>-Ddebug=true</code>.</p>
<dl>
<dt><code>actions</code></dt>
<dd>Actions and menu&nbsp;models</dd>
<dt><code>builder</code></dt>
<dd>GtkBuilder&nbsp;support</dd>
<dt><code>builder-objects</code></dt>
<dd>Unused GtkBuilder&nbsp;objects</dd>
<dt><code>geometry</code></dt>
<dd>Size&nbsp;allocation</dd>
<dt><code>icontheme</code></dt>
<dd>Icon&nbsp;themes</dd>
<dt><code>iconfallback</code></dt>
<dd>Information about icon&nbsp;fallback</dd>
<dt><code>keybindings</code></dt>
<dd>Keyboard&nbsp;shortcuts</dd>
<dt><code>modules</code></dt>
<dd>Modules and&nbsp;extensions</dd>
<dt><code>printing</code></dt>
<dd>Printing</dd>
<dt><code>size-request</code></dt>
<dd>Size&nbsp;requests</dd>
<dt><code>text</code></dt>
<dd>Text widget&nbsp;internals</dd>
<dt><code>tree</code></dt>
<dd>Tree widget&nbsp;internals</dd>
<dt><code>constraints</code></dt>
<dd>Constraints and the constraint&nbsp;solver</dd>
<dt><code>layout</code></dt>
<dd>Layout&nbsp;managers</dd>
<dt><code>acccessibility</code></dt>
<dd>Accessibility state&nbsp;changs</dd>
</dl>
<p>A number of keys are influencing behavior instead of just&nbsp;logging:</p>
<dl>
<dt><code>interactive</code></dt>
<dd>Open the <a href="#interactive-debugging">interactive&nbsp;debugger</a></dd>
<dt><code>no-css-cache</code></dt>
<dd>Bypass caching for <span class="caps">CSS</span> style&nbsp;properties</dd>
<dt><code>touchscreen</code></dt>
<dd>Pretend the pointer is a touchscreen&nbsp;device</dd>
<dt><code>snapshot</code></dt>
<dd>Include debug render nodes in the generated&nbsp;snapshots</dd>
</dl>
<p>The special value <code>all</code> can be used to turn on all debug options.
The special value <code>help</code> can be used to obtain a list of all
supported debug&nbsp;options.</p>
<h3 id="gtk_path"><code>GTK_PATH</code><a class="md-anchor" href="#gtk_path" title="Permanent link"></a></h3>
<p>Specifies a list of directories to search when <span class="caps">GTK</span> is looking for
dynamically loaded objects such as input method modules and print
backends. If the path to the dynamically loaded object is given as
an absolute path name, then <span class="caps">GTK</span> loads it directly. Otherwise, <span class="caps">GTK</span>
goes in turn through the directories in <code>GTK_PATH</code>, followed by
the directory <code>.gtk-4.0</code> in the user&#8217;s home directory, followed
by the system default directory, which is <code>libdir/gtk-4.0/modules</code>.
(If <code>GTK_EXE_PREFIX</code> is defined, <code>libdir</code> is <code>$GTK_EXE_PREFIX/lib</code>.
Otherwise it is the libdir specified when <span class="caps">GTK</span> was configured, usually
<code>/usr/lib</code>, or <code>/usr/local/lib</code>.)</p>
<p>For each directory in this list, <span class="caps">GTK</span> actually looks in a subdirectory
<code>directory/version/host/type</code>. Where <code>version</code> is derived from the
version of <span class="caps">GTK</span> (use <code>pkg-config --variable=gtk_binary_version gtk4</code>
to determine this from a script), <code>host</code> is the architecture on
which <span class="caps">GTK</span> was built. (use <code>pkg-config --variable=gtk_host gtk4</code> to
determine this from a script), and <code>type</code> is a directory specific to
the type of modules; currently it can be <code>modules</code>, <code>immodules</code> or
<code>printbackends</code>, corresponding to the types of modules mentioned
above. Either <code>version</code>, <code>host</code>, or both may be omitted. <span class="caps">GTK</span> looks
first in the most specific directory, then in directories with
fewer components.
The components of <code>GTK_PATH</code> are separated by the &#8216;:&#8217; character on
Linux and Unix, and the &#8216;;&#8217; character on&nbsp;Windows.</p>
<p>Note that this environment variable is read by <span class="caps">GTK</span> 2.x and <span class="caps">GTK</span> 3.x
too, which makes it unsuitable for setting it system-wide (or
session-wide), since doing so will cause applications using
different <span class="caps">GTK</span> versions to see incompatible&nbsp;modules.</p>
<h3 id="gtk_im_module"><code>GTK_IM_MODULE</code><a class="md-anchor" href="#gtk_im_module" title="Permanent link"></a></h3>
<p>Specifies an <span class="caps">IM</span> module to use in preference to the one determined
from the locale. If this isn&#8217;t set and you are running on the system
that enables <code>XSETTINGS</code> and has a value in <code>Gtk/IMModule</code>, that will
be used for the default <span class="caps">IM</span> module. This also can be a colon-separated
list of input-methods, which <span class="caps">GTK</span> will try in turn until it finds one
available on the&nbsp;system.</p>
<h3 id="gtk_media"><code>GTK_MEDIA</code><a class="md-anchor" href="#gtk_media" title="Permanent link"></a></h3>
<p>Specifies what backend to load for <a href="class.MediaFile.html"><code>GtkMediaFile</code></a>. The possible values
depend on what options <span class="caps">GTK</span> was built with, and can include &#8216;gstreamer&#8217;,
&#8216;ffmpeg&#8217; and &#8216;none&#8217;. If set to &#8216;none&#8217;, media playback will be unavailable.
The special value &#8216;help&#8217; can be used to obtain a list of all supported
media&nbsp;backends.</p>
<h3 id="gtk_exe_prefix"><code>GTK_EXE_PREFIX</code><a class="md-anchor" href="#gtk_exe_prefix" title="Permanent link"></a></h3>
<p>If set, <span class="caps">GTK</span> uses <code>$GTK_EXE_PREFIX/lib</code> instead of the libdir
configured when <span class="caps">GTK</span> was&nbsp;compiled.</p>
<h3 id="gtk_data_prefix"><code>GTK_DATA_PREFIX</code><a class="md-anchor" href="#gtk_data_prefix" title="Permanent link"></a></h3>
<p>If set, <span class="caps">GTK</span> uses <code>$GTK_DATA_PREFIX</code> instead of the prefix
configured when <span class="caps">GTK</span> was&nbsp;compiled.</p>
<h3 id="gtk_theme"><code>GTK_THEME</code><a class="md-anchor" href="#gtk_theme" title="Permanent link"></a></h3>
<p>If set, makes <span class="caps">GTK</span> use the named theme instead of the theme
that is specified by the gtk-theme-name setting. This is intended
mainly for easy debugging of theme&nbsp;issues.</p>
<p>It is also possible to specify a theme variant to load, by appending
the variant name with a colon, like this: <code>GTK_THEME=Adwaita:dark</code>.</p>
<p>The following environment variables are used by GdkPixbuf, <span class="caps">GDK</span> or
Pango, not by <span class="caps">GTK</span> itself, but we list them here for completeness&nbsp;nevertheless.</p>
<h3 id="gdk_pixbuf_module_file"><code>GDK_PIXBUF_MODULE_FILE</code><a class="md-anchor" href="#gdk_pixbuf_module_file" title="Permanent link"></a></h3>
<p>Specifies the file listing the GdkPixbuf loader modules to load.
This environment variable overrides the default value
<code>libdir/gtk-4.0/4.0.0/loaders.cache</code> (<code>libdir</code> is the sysconfdir
specified when <span class="caps">GTK</span> was configured, usually <code>/usr/lib</code>.)</p>
<p>The <code>loaders.cache</code> file is generated by the
<code>gdk-pixbuf-query-loaders</code> utility.</p>
<h3 id="gdk_debug"><code>GDK_DEBUG</code><a class="md-anchor" href="#gdk_debug" title="Permanent link"></a></h3>
<p>This variable can be set to a list of debug options, which cause <span class="caps">GDK</span> to
print out different types of debugging information. Some of these options
are only available when <span class="caps">GTK</span> has been configured with <code>-Ddebug=true</code>.</p>
<dl>
<dt><code>cursor</code></dt>
<dd>Information about cursor objects (only&nbsp;win32)</dd>
<dt><code>eventloop</code></dt>
<dd>Information about event loop operation (mostly&nbsp;macOS)</dd>
<dt><code>misc</code></dt>
<dd>Miscellaneous&nbsp;information</dd>
<dt><code>frames</code></dt>
<dd>Information about the frame&nbsp;clock</dd>
<dt><code>settings</code></dt>
<dd>Information about&nbsp;xsettings</dd>
<dt><code>selection</code></dt>
<dd>Information about&nbsp;selections</dd>
<dt><code>clipboard</code></dt>
<dd>Information about&nbsp;clipboards</dd>
<dt><code>dnd</code></dt>
<dd>Information about&nbsp;drag-and-drop</dd>
<dt><code>opengl</code></dt>
<dd>Information about&nbsp;OpenGL</dd>
<dt><code>vulkan</code></dt>
<dd>Information about&nbsp;Vulkan</dd>
</dl>
<p>A number of options affect behavior instead of&nbsp;logging:</p>
<dl>
<dt><code>nograbs</code></dt>
<dd>Turn off all pointer and keyboard&nbsp;grabs</dd>
<dt><code>gl-disable</code></dt>
<dd>Disable OpenGL&nbsp;support</dd>
<dt><code>gl-software</code></dt>
<dd>Force OpenGL software&nbsp;rendering</dd>
<dt><code>gl-texture-rect</code></dt>
<dd>Use the OpenGL texture rectangle extension, if&nbsp;available</dd>
<dt><code>gl-legacy</code></dt>
<dd>Use a legacy OpenGL&nbsp;context</dd>
<dt><code>gl-gles</code></dt>
<dd>Use a <span class="caps">GLES</span> OpenGL&nbsp;context</dd>
<dt><code>vulkan-disable</code></dt>
<dd>Disable Vulkan&nbsp;support</dd>
<dt><code>vulkan-validate</code></dt>
<dd>Load the Vulkan validation layer, if&nbsp;available</dd>
</dl>
<p>The special value <code>all</code> can be used to turn on all debug options. The special
value <code>help</code> can be used to obtain a list of all supported debug&nbsp;options.</p>
<h3 id="gsk_debug"><code>GSK_DEBUG</code><a class="md-anchor" href="#gsk_debug" title="Permanent link"></a></h3>
<p>This variable can be set to a list of debug options, which cause <span class="caps">GSK</span> to
print out different types of debugging information. Some of these options
are only available when <span class="caps">GTK</span> has been configured with <code>-Ddebug=true</code>.</p>
<dl>
<dt><code>renderer</code></dt>
<dd>General renderer&nbsp;information</dd>
<dt><code>cairo</code></dt>
<dd>cairo renderer&nbsp;information</dd>
<dt><code>opengl</code></dt>
<dd>OpenGL renderer&nbsp;information</dd>
<dt><code>shaders</code></dt>
<dd>Shaders</dd>
<dt><code>surface</code></dt>
<dd>Surfaces</dd>
<dt><code>vulkan</code></dt>
<dd>Vulkan renderer&nbsp;information</dd>
<dt><code>fallback</code></dt>
<dd>Information about&nbsp;fallbacks</dd>
<dt><code>glyphcache</code></dt>
<dd>Information about glyph&nbsp;caching</dd>
</dl>
<p>A number of options affect behavior instead of&nbsp;logging:</p>
<dl>
<dt><code>diff</code></dt>
<dd>Show&nbsp;differences</dd>
<dt><code>geometry</code></dt>
<dd>Show&nbsp;borders</dd>
<dt><code>full-redraw</code></dt>
<dd>Force full redraws for every&nbsp;frame</dd>
<dt><code>sync</code></dt>
<dd>Sync after each&nbsp;frame</dd>
<dt><code>vulkan-staging-image</code></dt>
<dd>Use a staging image for Vulkan texture&nbsp;upload</dd>
<dt><code>vulkan-staging-buffer</code></dt>
<dd>Use a staging buffer for Vulkan texture&nbsp;upload</dd>
</dl>
<p>The special value <code>all</code> can be used to turn on all debug options. The special
value <code>help</code> can be used to obtain a list of all supported debug&nbsp;options.</p>
<h3 id="gdk_backend"><code>GDK_BACKEND</code><a class="md-anchor" href="#gdk_backend" title="Permanent link"></a></h3>
<p>If set, selects the <span class="caps">GDK</span> backend to use. Selecting a backend
requires that <span class="caps">GTK</span> is compiled with support for that backend.
The following backends can be selected, provided they are
included in the <span class="caps">GDK</span> libraries you are&nbsp;using:</p>
<dl>
<dt><code>quartz</code></dt>
<dd>Selects the native Quartz&nbsp;backend</dd>
<dt><code>win32</code></dt>
<dd>Selects the native backend for Microsoft&nbsp;Windows</dd>
<dt><code>x11</code></dt>
<dd>Selects the native backend for connecting to X11&nbsp;servers</dd>
<dt><code>broadway</code></dt>
<dd>Selects the Broadway backend for display in web&nbsp;browsers</dd>
<dt><code>wayland</code></dt>
<dd>Selects the Wayland backend for connecting to Wayland&nbsp;compositors</dd>
</dl>
<p>This environment variable can contain a comma-separated list of
backend names, which are tried in order. The list may also contain
a <code>*</code>, which means: try all remaining backends. The special value
<code>help</code> can be used to make <span class="caps">GDK</span> print out a list of all available
backends. For more information about selecting backends,
see the <a href="javascript:void(0)" data-namespace="Gdk" data-link="type_func.DisplayManager.get.html" class="external">gdk_display_manager_get()</a>&nbsp;function.</p>
<h3 id="gdk_vulkan_device"><code>GDK_VULKAN_DEVICE</code><a class="md-anchor" href="#gdk_vulkan_device" title="Permanent link"></a></h3>
<p>This variable can be set to the index of a Vulkan device to override
the default selection of the device that is used for Vulkan rendering.
The special value <code>list</code> can be used to obtain a list of all Vulkan&nbsp;devices.</p>
<h3 id="gsk_renderer"><code>GSK_RENDERER</code><a class="md-anchor" href="#gsk_renderer" title="Permanent link"></a></h3>
<p>If set, selects the <span class="caps">GSK</span> renderer to use. The following renderers can
be selected, provided they are included in the <span class="caps">GTK</span> library you are
using and the <span class="caps">GDK</span> backend supports&nbsp;them:</p>
<dl>
<dt><code>help</code></dt>
<dd>Prints information about available&nbsp;options</dd>
<dt><code>broadway</code></dt>
<dd>Selects the Broadway-backend specific&nbsp;renderer</dd>
<dt><code>cairo</code></dt>
<dd>Selects the fallback Cairo&nbsp;renderer</dd>
<dt><code>opengl</code></dt>
<dd>Selects the default OpenGL&nbsp;renderer</dd>
<dt><code>gl</code></dt>
<dd>Selects the &#8220;gl&#8221; OpenGL&nbsp;renderer</dd>
<dt><code>ngl</code></dt>
<dd>Selects the &#8220;ngl&#8221; OpenGL&nbsp;renderer</dd>
<dt><code>vulkan</code></dt>
<dd>Selects the Vulkan&nbsp;renderer</dd>
</dl>
<h3 id="gtk_csd"><code>GTK_CSD</code><a class="md-anchor" href="#gtk_csd" title="Permanent link"></a></h3>
<p>The default value of this environment variable is <code>1</code>. If changed
to <code>0</code>, this disables the default use of client-side decorations
on <span class="caps">GTK</span> windows, thus making the window manager responsible for
drawing the decorations of windows that do not have a custom
titlebar&nbsp;widget.</p>
<p><span class="caps">CSD</span> is always used for windows with a custom titlebar widget set,
as the <span class="caps">WM</span> should not draw another titlebar or other decorations
around the custom&nbsp;one.</p>
<h3 id="gtk_a11y"><code>GTK_A11Y</code><a class="md-anchor" href="#gtk_a11y" title="Permanent link"></a></h3>
<p>If set, selects the accessibility backend to use. The following
backends can be selected, provided they are included in the <span class="caps">GTK</span>
library you are&nbsp;using:</p>
<dl>
<dt><code>help</code></dt>
<dd>Prints information about available&nbsp;options</dd>
<dt><code>atspi</code></dt>
<dd>Selects the <span class="caps">AT</span>-<span class="caps">SPI</span> accessibility&nbsp;backend</dd>
<dt><code>test</code></dt>
<dd>Selects the test&nbsp;backend</dd>
<dt><code>none</code></dt>
<dd>Disables the accessibility&nbsp;backend</dd>
</dl>
<p>The <code>test</code> accessibility backend is recommended for test suites and remote
continuous integration&nbsp;pipelines.</p>
<h3 id="xdg_dta_home-xdg_data_dirs"><code>XDG_DTA_HOME</code>, <code>XDG_DATA_DIRS</code><a class="md-anchor" href="#xdg_dta_home-xdg_data_dirs" title="Permanent link"></a></h3>
<p><span class="caps">GTK</span> uses these environment variables to locate icon themes
and <span class="caps">MIME</span> information. For more information, see the
<a href="https://freedesktop.org/Standards/icon-theme-spec">Icon Theme Specification</a>
the <a href="https://freedesktop.org/Standards/shared-mime-info-spec">Shared <span class="caps">MIME</span>-Info Database</a>
and the <a href="https://freedesktop.org/Standards/basedir-spec">Base Directory Specification</a>.</p>
<h3 id="desktop_startup_id"><code>DESKTOP_STARTUP_ID</code><a class="md-anchor" href="#desktop_startup_id" title="Permanent link"></a></h3>
<p><span class="caps">GTK</span> uses this environment variable to provide startup notification
according to the <a href="https://standards.freedesktop.org/startup-notification-spec/startup-notification-latest.txt">Startup Notification Spec</a>.
Following the specification, <span class="caps">GTK</span> unsets this variable after reading
it (to keep it from leaking to child processes). So, if you need its
value for your own purposes, you have to read it before calling
<a href="func.init.html">gtk_init()</a>.</p>
<h2 id="interactive-debugging">Interactive debugging<a class="md-anchor" href="#interactive-debugging" title="Permanent link"></a></h2>
<p><img alt="The inspector" src="inspector.png" /></p>
<p><span class="caps">GTK</span> includes an interactive debugger, called the <span class="caps">GTK</span> Inspector, which
lets you explore the widget tree of any <span class="caps">GTK</span> application at runtime,
as well as tweak the theme and trigger visual debugging aids. You can
easily try out changes at runtime before putting them into the&nbsp;code.</p>
<p>Note that the <span class="caps">GTK</span> inspector can only show <span class="caps">GTK</span> internals. It can not
understand the application-specific logic of a <span class="caps">GTK</span> application. Also,
the fact that the <span class="caps">GTK</span> inspector is running in the application process
limits what it can do. It is meant as a complement to full-blown
debuggers and system tracing facilities such as DTrace, not as a&nbsp;replacement.</p>
<p>To enable the <span class="caps">GTK</span> inspector, you can use the <kbd>Control</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd> or
<kbd>Control</kbd>+<kbd>Shift</kbd>+<kbd>D</kbd> keyboard shortcuts, or
set the <code>GTK_DEBUG=interactive</code> environment&nbsp;variable.</p>
<p>There are a few more environment variables that can be set to influence
how the inspector renders its <span class="caps">UI</span>. <code>GTK_INSPECTOR_DISPLAY</code> and
<code>GTK_INSPECTOR_RENDERER</code> determine the <span class="caps">GDK</span> display and the <span class="caps">GSK</span>
renderer that the inspector is&nbsp;using.</p>
<p>In some situations, it may be inappropriate to give users access to
the <span class="caps">GTK</span> inspector. The keyboard shortcuts can be disabled with the
<code>enable-inspector-keybinding</code> key in the <code>org.gtk.Settings.Debug</code>
GSettings&nbsp;schema.</p>
<h2 id="profiling">Profiling<a class="md-anchor" href="#profiling" title="Permanent link"></a></h2>
<p><span class="caps">GTK</span> supports profiling with sysprof. It exports timing information
about frameclock phases and various characteristics of GskRenderers
in a format that can be displayed by sysprof or <span class="caps">GNOME</span>&nbsp;Builder.</p>
<p>A simple way to capture data is to run your application under the
<code>sysprof-cli</code> wrapper, which will write profiling data to a file
called <code>capture.syscap</code>.</p>
<p>When launching the application from sysprof, it will set the
<code>SYSPROF_TRACE_FD</code> environment variable to point <span class="caps">GTK</span> at a file
descriptor to write profiling data&nbsp;to.</p>
    </div>
  </section>
</section>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>